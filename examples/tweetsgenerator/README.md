# Tweet Generator

This project demonstrates how to build a tweet generation and ranking pipeline using Indexify. The pipeline generates tweet topics, creates tweets, and then scores and ranks them.

## Features

- Generate tweet topics based on a given subject
- Create tweets for each topic
- Accumulate generated tweets
- Score and rank the generated tweets

## Prerequisites

- Python 3.9+
- Docker and Docker Compose (for containerized setup)
- OpenAI API key

NOTE: The example is setup to work with python 3.10. See `image` param in the workflow and the image name used in
the docker compose file. Please update them as needed while following the instructions below for Docker deployment.

## Installation and Usage

### Option 1: Local Installation - In Process

1. Clone this repository:
   ```
   git clone https://github.com/tensorlakeai/indexify
   cd indexify/examples/tweetsgenerator
   ```

2. Create a virtual environment and activate it:
   ```
   python -m venv venv
   source venv/bin/activate
   ```

3. Install the required dependencies:
   ```
   pip install -r requirements.txt
   ```

4. Set up environment variables:
   ```
   export OPENAI_API_KEY=your_openai_api_key
   ```

5. Run the main script:
   ```
   python workflow.py --mode in-process-run
   ```

### Option 2: Using Docker Compose - Deployed Graph

1. Clone this repository:
   ```
   git clone https://github.com/tensorlakeai/indexify
   cd indexify/examples/tweetsgenerator
   ```

2. Build the Docker image:
   ```
   indexify-cli build-image workflow.py generate_tweet_topics accumulate_tweets
   ```

3. Create a `.env` file in the project directory and add your API key:
   ```
   OPENAI_API_KEY=your_openai_api_key
   ```

4. Start the services:
   ```
   docker-compose up --build
   ```

5. Deploy the graph:
   ```
   python workflow.py --mode remote-deploy
   ```

6. Run the workflow:
   ```
   python workflow.py --mode remote-run
   ```

## How it Works

1. **Topic Generation:**
   - Uses OpenAI's GPT-4 to generate tweet topics based on a given subject.

2. **Tweet Creation:**
   - Generates tweets for each topic using GPT-4.

3. **Tweet Accumulation:**
   - Collects all generated tweets.

4. **Scoring and Ranking:**
   - Scores and ranks the generated tweets using GPT-4.

## Indexify Graph Structure

The project uses the following Indexify graph:

```
generate_tweet_topics -> generate_tweet -> accumulate_tweets -> score_and_rank_tweets
```

## Customization

- Modify the `subject` URL in the `run_workflow()` function to generate tweets about different topics.
- Adjust the prompts in the OpenAI function calls for different tweet styles or ranking criteria.
- Change the number of topics or tweets generated by modifying the relevant functions.
